package com.board;

import static org.junit.jupiter.api.Assertions.assertEquals;

import java.sql.Connection;
import java.sql.SQLException;

import javax.sql.DataSource;

import org.apache.ibatis.session.SqlSession;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;

import com.board.domain.BoardVo;
import com.board.mapper.BoardMapper;

@SpringBootTest
class BoardApplicationTests {
	
	@Autowired
	private  DataSource   ds;
	
	@Autowired
	private  SqlSession   sqlSession;
	
	@Autowired
	private  BoardMapper  mapper;
	
	@Test
	void contextLoads() {
	}
		
	@Test
	public  void test1() {
		double  n1  = 10;
		double  n2  = 3;
		double  n   = n1 / n2;
		System.out.println( n );  // 3.333333335
		//assertEquals(n , 3.5);    // n == 3.5 , 빨간색 테스트 실패
		assertEquals(n, 3.5, 0.5);	
		  // n == 3.5 (단 오차범위 +- 0.5 허용) 녹색 테스트 성공 	
	}

	// datasource 연결 테스트
	@Test
	public void testConnection() throws SQLException {
		// db 연결 테스트 
		Connection  conn = ds.getConnection(); 
		System.out.println( conn );
		conn.close();
	} 
	
	@Test
	void testSqlSession() {
		System.out.println( "sqlSession:" + sqlSession );
	}
	
	@Test
	void testInsert() {
		BoardVo  vo = new BoardVo();
		vo.setTitle("세번째 글");
		vo.setContent("세번째 글 내용");
		vo.setWriter("태훈이가");
		System.out.println( vo );
		
		mapper.boardInsert(vo);
		
	}
    
}










